(function(n,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(n=typeof globalThis<"u"?globalThis:n||self,i(n.StragaUI={}))})(this,function(n){"use strict";function i(a,e){const t=a();if(!t)throw new Error(e||"Invalid value.");return t}function d(){return new Promise(a=>{requestAnimationFrame(()=>{requestAnimationFrame(a)})})}function s(a){const e=[];return a.forEach(t=>{const o=t.getAnimations();o.length>0&&e.push(...o.map(g=>g.finished))}),Promise.all(e)}class r extends HTMLElement{get name(){return i(()=>this.getAttribute("name"),"Straga dialog name not defined.")}get dialog(){return i(()=>this.querySelector("dialog"),"Straga dialog not defined.")}get overlay(){return i(()=>this.querySelector("[data-dialog=overlay]"),"Straga dialog overlay not found.")}get content(){return i(()=>this.querySelector("[data-dialog=content]"),"Straga dialog content not found.")}get isOpen(){return this.dialog.open}connectedCallback(){this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeydown)}disconnectedCallback(){this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeydown)}show(){const e=this.dialog,t=this.overlay,o=this.content;e.classList.add("--enter"),e.showModal(),e.classList.add("--entering"),s([t,o]).then(()=>{e.classList.remove("--enter","--entering")})}hide(){const e=this.dialog,t=this.overlay,o=this.content;e.classList.add("--exit"),e.classList.add("--exiting"),s([t,o]).then(()=>{e.classList.remove("--exit","--exiting"),e.close()})}handleClick(e){e.target instanceof HTMLElement&&(e.target.getAttribute("data-dialog")==="overlay"||e.target.getAttribute("data-dialog")==="close")&&this.hide()}handleKeydown(e){e.target instanceof HTMLElement&&this.contains(e.target)&&e.key==="Escape"&&(e.preventDefault(),this.hide())}}class l extends HTMLElement{get target(){return i(()=>this.getAttribute("target"),"Straga dialog trigger target not defined.")}connectedCallback(){this.addEventListener("click",this.handleClick)}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}handleClick(e){if(e.target instanceof HTMLElement&&e.target===this.firstElementChild){const t=document.querySelector(`straga-dialog[name=${this.target}]`);if(!t||t.isOpen)return;t.show()}}}function c(){customElements.define("stg-dialog",r),customElements.define("stg-dialog-trigger",l)}n.StragaDialog=r,n.StragaDialogTrigger=l,n.afterTransition=s,n.configureElements=c,n.getEnsured=i,n.nextTick=d,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
